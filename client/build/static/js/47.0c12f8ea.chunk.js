(this["webpackJsonpnihongo-admin"]=this["webpackJsonpnihongo-admin"]||[]).push([[47],{1946:function(e,n,t){"use strict";t.r(n);var r=t(24),a=t(55),s=t.n(a),o=t(17),c=t(157),u=t(5),i=t.n(u);function p(e){return l.apply(this,arguments)}function l(){return(l=Object(c.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.post("/user/login",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.default={namespace:"login",state:{loggedIn:!1,message:"",user:{}},subscriptions:{setup:function(e){var n=e.history;e.dispatch;return n.listen((function(e){-1!==e.pathname.indexOf("/sign/login")&&i.a.removeStore("user")}))}},effects:{login:s.a.mark((function e(n,t){var r,a,c,u,l,g,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.payload,a=t.call,c=t.put,e.prev=2,e.next=5,a(p,r);case 5:if(u=e.sent,l=u.status,g=u.message,f=u.data,!l){e.next=15;break}return i.a.setStore("user",f),e.next=13,c(o.d.replace("/"));case 13:e.next=17;break;case 15:return e.next=17,c({type:"loginError",payload:{message:g}});case 17:e.next=24;break;case 19:return e.prev=19,e.t0=e.catch(2),console.log(e.t0),e.next=24,c({type:"loginError",payload:{message:e.t0.message}});case 24:case"end":return e.stop()}}),e,null,[[2,19]])})),logout:s.a.mark((function e(n,t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.put;case 1:case"end":return e.stop()}}),e)}))},reducers:{loginSuccess:function(e,n){var t=n.payload;return Object(r.a)({},e,{loggedIn:!0,message:"",user:t})},loginError:function(e,n){var t=n.payload;return Object(r.a)({},e,{loggedIn:!1,message:t.message})}}}}}]);
//# sourceMappingURL=47.0c12f8ea.chunk.js.map